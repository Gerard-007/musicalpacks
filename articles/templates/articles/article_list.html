{% extends "layout.html" %}
{% load blog_tag %}
{% load staticfiles %}

{% block title %}blog{% endblock title %}

{% block content %}
  <!--Main layout-->
  <main>
    <div class="row">
      <div class="container-fluid">
        <!--Section: Jumbotron-->
        <section
            style="background-image: url(https://res.cloudinary.com/hoezb3yx8/image/upload/v1525869595/musicadence/imgs/Tutorial_music.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            height: 300px;
            ">


            <!-- Content -->
            <div class="card-body text-white text-center">

                <h1 class="mb-4">
                    <strong>Welcome to Musicadence blog</strong>
                </h1>
                <p>
                    <strong>Best and free guide for music learners</strong>
                </p>
                <p class="mb-4">
                    <strong>The most comprehensive tutorial for the music lovers.
                    Dont forget to visit our blog daily for more topics and updates.
                  we currently have written {% total_posts %}</strong>
                </p>
                <p><a href="{% url 'posts:post_feed' %}">Subscribe to my RSS feeds</a></p>

            </div>
            <!-- Content -->

        </section>
        <!--Section: Jumbotron-->
      </div>
    </div>


    <div class="row">
      <div class="container">
          <hr class="my-5">

          <!--Section: Cards-->
          <section class="text-center">
            <div class="row">
              <div class="container mb-5">
                {% if tag %}
                    <h3 class="text-center">Posts tagged with "{{ tag.name }}"</h3>
                {% endif %}
              </div>
            </div>


              <!--Grid row-->
              <div class="row mb-4 wow fadeIn">
                {% for post in posts %}
                  <!-- grid column -->
                  <div class="col-md-4">
                      <!--Card-->
                      <div class="card">
                          <!--Card image-->
                          <div class="view overlay">
                              <img src="{{ post.get_img_url.url }}" class="img-fluid" alt="{{post.slug}}">
                              <a href="{% url 'posts:post_detail' slug=post.slug %}">
                                  <div class="mask rgba-white-slight"></div>
                              </a>
                          </div>
                          <!--/.Card image-->

                          <!--Button-->
                          <a class="btn-floating btn-action ml-auto mr-4 mdb-color lighten-3"
                            href="{% url 'posts:post_detail' slug=post.slug %}"><i class="fa fa-chevron-right pl-1"></i></a>

                          <!--Card content-->
                          <div class="card-body">
                              <!--Title-->
                              <h4 class="card-title">{{post.title}}</h4>
                              <hr>
                              <!--Text-->
                              <p class="font-small grey-dark-text mb-0">{{post.content|safe|truncatewords:5|linebreaks}}</p>
                              <hr width='50%'>
                              <!--Tag-->
                              <span class="badge badge-pill blue">Tag:
                                {% for tag in post.tags.all %}
                                    <a href="{% url 'posts:post_list_by_tag' tag.slug %}">{{tag.name}}</a>
                                    {% if not forloop.last %}, {% endif %}
                                {% endfor %}
                              </span>
                          </div>
                          <!--/.Card content-->
                          <!-- Card footer -->
                          <div class="mdb-color lighten-3 text-center">
                              <ul class="list-unstyled list-inline font-small mt-3">
                                  <li class="list-inline-item pr-2 white-text"><i class="fa fa-clock-o pr-1"></i>{{post.timestamp}}</li>
                                  <li class="list-inline-item pr-2"><a href="#" class="white-text"><i class="fa fa-comments-o pr-1"></i>{{comments.count}}</a></li>
                                  <li class="list-inline-item pr-2"><a href="#" class="white-text"><i class="fa fa-facebook pr-1"> </i>0</a></li>
                                  <li class="list-inline-item"><a href="#" class="white-text"><i class="fa fa-twitter pr-1"> </i>0</a></li>
                              </ul>
                          </div>
                          <!-- Card footer -->
                      </div>
                      <!--/.Card-->
                  </div>
                  <!--/.grid column -->

                  {% if forloop.counter|divisibleby:"3" %}
                    </div>
                    <!--Grid row-->

                    <!--Grid row-->
                    <div class="row mb-4 wow fadeIn">
                  {% endif %}
                {% endfor %}

                    </div>
                    <!--Grid row-->

          </section>
          <!--Section: Cards-->

          {% include "blog/pagination.html" with page=posts %}

      </div>
      <!--container-->

    </div>
    <!--row-->

  </main>
  <!--Main layout-->
{% endblock %}
